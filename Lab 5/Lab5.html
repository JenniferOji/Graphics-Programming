<!DOCTYPE html>
<html>
<!--Import Three.js CDN-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r127/three.min.js"></script>

<head>
    <meta charset="UTF-8">
    <title></title>
    <h1>Jennifer</h1>
    <style type="text/css">
    </style>
</head>

<body>
    <script type="text/javascript">

        //Sphere object class 
        class Sphere{
            constructor(radius,width,height,xposition,yposition,zposition,xvelocity,yvelocity){
                //shape of sphere
                this.radius = radius;
                this.width = width;
                this.height = height;
                //location of sphere
                this.xposition = xposition;
                this.yposition = yposition;
                this.zposition = zposition;
                //this.sphere.position.set(xposition, yposition, zposition);

                //movement of sphere
                this.xvelocity = xvelocity;
                this.yvelocity = yvelocity;

                this.geometry = new THREE.SphereGeometry( this.radius, this.width, this.height ); 
                this.material = new THREE.MeshLambertMaterial( { color: 0xffff00, wireframe: true } ); 
               
                this.sphere = new THREE.Mesh( this.geometry, this.material ); 
                //setting up the camera to cast shadow
                //to cast a shadow make sure the variants are in line
                this.sphere.castShadow = true; 
                this.sphere.receiveShadow = false; 
                scene.add( this.sphere);
            }

            // to make the sphere move 
            move(){
                this.yposition += this.yvelocity;
                //this.xposition += this.xvelocity;

                //reversing the ball if it reaching the end of the canvas 
                if (this.yposition <= -20){
                    this.yvelocity = this.yvelocity * -1;
                }
                //when the ball goes above the canvas it stops 
                else if (this.yposition >= 10) {
                   this.yvelocity = this.yvelocity * -1;
                }

                //updating the spheres position 
                this.sphere.position.set(this.xposition, this.yposition, this.zposition);

            }
        }

        // Implement scene - Create a Three.js scene to hold objects.
        var scene = new THREE.Scene();

        // Create a camera with specified properties.
        var camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.1, 1000);
       
        // Set camera position
        camera.position.z = 60;
       
        // Implement renderer - Create a WebGL renderer for rendering the scene.
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        //turning on shadows  
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        document.body.appendChild(renderer.domElement);

        const light = new THREE.PointLight( 0xff0000, 1, 500);
        //                  x,  y,  z
        light.position.set( -10, 30, 60);
        light.castShadow = true; // default false
        scene.add( light );

        //Set up shadow properties for the light
        light.shadow.mapSize.width = 512; 
        light.shadow.mapSize.height = 512; 
        light.shadow.camera.near = 0.5; 
        light.shadow.camera.far = 500; 

        const geometry = new THREE.PlaneGeometry( 60, 60 );
        const material = new THREE.MeshLambertMaterial( {color: 0xffff00, side: THREE.DoubleSide} );
        const plane = new THREE.Mesh( geometry, material );
        plane.receiveShadow = true;
        scene.add( plane );
        
        const helper = new THREE.CameraHelper( light.shadow.camera );
        scene.add( helper );
        //creating sphere object 
        //            rad,wid,high,x,y,z,xvel,yvel
        s1 = new Sphere(5,32,16,  0,5,10,  1,0.5);

        //calling repeate me loop to rotate the sphere 
        function repeatMe() {
            //Code to rotate sphere
            s1.sphere.rotation.x += 0.01;
            s1.sphere.rotation.y += 0.01;
            s1.sphere.position.z = 50;

            plane.rotation.x = -Math.PI / 2;
            s1.sphere.position.set(0, 5, 30);

            //                   x,  y,  z
            plane.position.set(0, -20, -5);

            s1.move();

            //having the sphere rotate on different axis 
            //s1.sphere.position.x += 0.01;
            renderer.render(scene,camera);
            window.requestAnimationFrame(repeatMe); 
        }

        repeatMe();
    </script>
</body>

</html>