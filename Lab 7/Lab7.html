<!DOCTYPE html>
<html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>
<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>

 <head>
 <title>D3.js Demo</title>
 <h1>Jenny</h1>
 <meta charset="UTF-8">
 <style type="text/css">
    body
    {
        font-size: 18px; 
        font-family: Arial, sans-serif; 
    }
 </style>
 </head>
 <body>
 <script type="text/javascript">
    $.getJSON("https://tinyurl.com/k4chnujx", function(data){
        //print to console
        console.log(data);
        //call function 
        plotC02Data(data);
    })

    function plotC02Data(data){
        //set up svg and size margins 
        var margin = { top: 50, right: 50, bottom: 50, left: 50 }
        width = 900 - margin.left - margin.right;
        height = 670 - margin.top - margin.bottom;

        //create x and y scales for interpolated value (x-axis)
        //if plotting multiple lines you only need one xaxis
        var x = d3.scaleLinear()//draw line - map x, ycoords for each data point
            .domain(d3.extent(data, function (d) {return d["years_before_2023"]; }))
            .range([0, width]); //svg is down 

        //for the line co2 
        var y = d3.scaleLinear()//draw line - map x, ycoords for each data point
            .domain(d3.extent(data, function (d) {return d["co2_ppmv"]; }))
            .range([height, 0]); //svg is down 

        //for the line tempanomoly 
        var yTemp_Anomaly= d3.scaleLinear()
            .domain(d3.extent(data, function (d) {return d["temp_anomaly"]; }))
            .range([height, 0]);

        //for methane 
        var yMethane = d3.scaleLinear()
            .domain(d3.extent(data, function (d) {return d["ch4_ppb"]; }))
            .range([height, 0]);


        //axis
        var xAxis = d3.axisBottom(x)
            .ticks(3);//the number of dashes on the line

        var yAxis = d3.axisLeft(y)
            .ticks(3);//the number of dashes on the line 

        //co2 line 
        var valueline = d3.line() //draw line - map x, y coords for each data point 
            .x(function(d){return x(d["years_before_2023"])})
            .y(function(d){return y(d["co2_ppmv"])});

        //temp anomaly line 
        var valueline2 = d3.line() //draw line - map x, y coords for each data point 
            .x(function(d){return x(d["years_before_2023"])})
            .y(function(d){return yTemp_Anomaly(d["temp_anomaly"])});

        //methane line 
        var valueline3 = d3.line() //draw line - map x, y coords for each data point 
            .x(function(d){return x(d["years_before_2023"])})
            .y(function(d){return yMethane(d["ch4_ppb"])});
                
        
        var svg = d3.select('body')
            .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)

            .append("g")
                //provides an offset so numeric values are visible 
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")")

            //adding the axis 
            svg.append('g')//append a <g> - group element 
                .attr('class', 'x axis')//specify classes 
                .attr("transform", "translate(0," + height + ")")
                .style("font-size", "14px") 
                .call(xAxis);

            svg.append('g')
                .attr('class', 'y axis')
                .style("font-size", "12px") //increasing font size 
                .call(yAxis);

            //drawing the path 
            svg.append("path")
                .attr("d", valueline(data))
                .attr("stroke", "red")//have to add stroke before you remove the line 
                .attr("fill", "none");

            //line for methane 
            svg.append("path")
                .datum(data)
                .attr("class", "line temp")
                .attr("d", valueline2)
                .attr("stroke", "blue")
                .attr("fill", "none");

            svg.append("path")
                .datum(data)
                .attr("class", "line methane")
                .attr("d", valueline3)
                .attr("stroke", "green")
                .attr("fill", "none");

            //adding text to the axis 
            svg.append("text")
                .attr("class", "x label")
                .attr("text-anchor", "end")
                .attr("x", width - 330)
                .attr("y", height + 40)
                .text("years_before_2023");

            svg.append("text")
                .attr("class", "y label")
                .attr("text-anchor", "end")
                .attr("y", -50)
                .attr("x", -200)
                .attr("dy", ".75em")
                .attr("transform", "rotate(-90)")
                .text("life expectancy (years)");

            //chart label 
            svg.append("text")
                .attr("x", (width / 2))             
                .attr("y", 0 - (margin.top / 2))
                .attr("text-anchor", "middle")  
                .style("font-size", "16px") 
                .style("text-decoration", "underline")  
                .text("CO2 Data");
  
    }

   

 </script>

 </body>
 
</html>

